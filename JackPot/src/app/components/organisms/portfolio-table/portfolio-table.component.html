<app-table-header
  text="Holdings ({{ holdingCount }})"
  (searchEvent)="search($event)"
  (downloadEvent)="downloadPortfolio()"
  (assetTypeEvent)="assetClassChange($event.toString())"
  (accountEvent)="accountTypeChange($event.toString())"
></app-table-header>

<table
  mat-table
  matTableExporter
  #exporter="matTableExporter"
  [dataSource]="dataSource"
  [hiddenColumns]="[8]"
  class="mat-elevation-z8"
>
  <ng-container matColumnDef="fund">
    <th mat-header-cell *matHeaderCellDef>Fund</th>
    <td mat-cell *matCellDef="let element">{{ element.fundName }}</td>
  </ng-container>

  <ng-container matColumnDef="units">
    <th mat-header-cell *matHeaderCellDef>Units</th>
    <td mat-cell *matCellDef="let element">{{ element.quantity }}</td>
  </ng-container>

  <ng-container matColumnDef="avgcost">
    <th mat-header-cell *matHeaderCellDef>Avg Cost</th>
    <td mat-cell *matCellDef="let element">{{ element.avgCost }}</td>
  </ng-container>

  <ng-container matColumnDef="ltp">
    <th mat-header-cell *matHeaderCellDef>LTP</th>
    <td mat-cell *matCellDef="let element">{{ element.ltp | number }}</td>
  </ng-container>
  <ng-container matColumnDef="currentval">
    <th mat-header-cell *matHeaderCellDef>CurrentVal</th>
    <td mat-cell *matCellDef="let element">
      {{ element.currentValue | number: "1.2-2" }}
    </td>
  </ng-container>

  <ng-container matColumnDef="netchg">
    <th mat-header-cell *matHeaderCellDef>NET CHG</th>
    <td
      mat-cell
      *matCellDef="let element"
      [style.color]="isPositive(element.netchg) ? 'green' : 'red'"
    >
      {{ element.netChange / 100 | percent: "1.2" }}
    </td>
  </ng-container>
  <ng-container matColumnDef="daychg">
    <th mat-header-cell *matHeaderCellDef>DAY CHG</th>
    <td
      mat-cell
      *matCellDef="let element"
      [style.color]="isPositive(element.daychg) ? 'green' : 'red'"
    >
      {{ element.dayChange / 100 | percent: "1.2" }}
    </td>
  </ng-container>

  <ng-container matColumnDef="pandl">
    <th mat-header-cell *matHeaderCellDef>P&L</th>
    <td
      mat-cell
      *matCellDef="let element"
      [style.color]="isPositive(element.pandl) ? 'green' : 'red'"
    >
      {{ element.profitLoss }}
    </td>
  </ng-container>

  <ng-container matColumnDef="btn">
    <th mat-header-cell *matHeaderCellDef>BUY / SELL</th>
    <td mat-cell *matCellDef="let element">
      <app-buy-sell-panel CARD_TICKER="{{element.fund}}" class="btnbs"></app-buy-sell-panel>
    </td>
  </ng-container>

  <tr mat-header-row *matHeaderRowDef="displayedColumns"></tr>
  <tr mat-row *matRowDef="let row; columns: displayedColumns"></tr>
</table>
<div class="no-data-found" *ngIf="holdingCount == 0">
  No data found
</div>
<app-portfolio-summary
  [totalInvestment]="totalInvestment"
  [currentVal]="currentVal"
  [netPl]="netpl"
></app-portfolio-summary>

<!-- <table>
    <thead>
        <tr>
            <th>FUND</th>
            <th>UNIT</th>
            <th>AVG COST</th>
            <th>LTP</th>
            <th>CURRENTVAL</th>
            <th>P&L</th>
            <th>NETCHG</th>
            <th>DAYCHG</th>
        </tr>
    </thead>
    <tbody>
        <tr *ngFor="let d of data">
            <td>{{d.fund}}</td>
            <td>{{d.units}}</td>
            <td>{{d.avgcost}}</td>
            <td>{{d.ltp}}</td>
            <td>{{d.currentval}}</td>
            <td>{{d.pandl}}</td>
            <td>{{d.netchg}}</td>
            <td>{{d.daychg}}</td>
        </tr>
    </tbody>
</table> -->
